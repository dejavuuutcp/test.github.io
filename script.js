const c=document.getElementById('c'),x=c.getContext('2d'),t=document.getElementById('t');let w,h,p=[],e=[],pos={x:100,y:100},vel={x:2,y:1.5},col=0,cls=['c0','c1','c2','c3','c4','c5'];const colors={'c0':'#0ff','c1':'#f08','c2':'#ff0','c3':'#0f8','c4':'#f80','c5':'#80f'};class Pt{constructor(a,b){this.x=a,this.y=b,this.vx=(Math.random()-.5)*.8,this.vy=(Math.random()-.5)*.8,this.s=Math.random()*3+1,this.r=Math.random()*100+155,this.g=Math.random()*100+155,this.b=255,this.l=1,this.d=Math.random()*.02+.005}update(){return this.vx*=.99,this.vy*=.99,this.x+=this.vx,this.y+=this.vy,this.x<0||this.x>w&&(this.vx*=-.8),this.y<0||this.y>h&&(this.vy*=-.8),this.x=Math.max(0,Math.min(w,this.x)),this.y=Math.max(0,Math.min(h,this.y)),this.l-=this.d,this.l>0}draw(){x.fillStyle=`rgba(${this.r},${this.g},${this.b},${this.l})`,x.beginPath(),x.arc(this.x,this.y,this.s*this.l,0,2*Math.PI),x.fill()}}class Ex{constructor(a,b){this.p=[];for(let i=0;i<15;i++){let c=(i/15)*2*Math.PI,d=Math.random()*3+2;this.p.push({x:a,y:b,vx:Math.cos(c)*d,vy:Math.sin(c)*d,s:Math.random()*4+2,l:1,d:Math.random()*.03+.02})}}update(){return this.p=this.p.filter(a=>{return a.x+=a.vx,a.y+=a.vy,a.vx*=.95,a.vy*=.95,a.l-=a.d,a.l>0}),this.p.length>0}draw(){this.p.forEach(a=>{x.fillStyle=`rgba(255,0,128,${a.l})`,x.beginPath(),x.arc(a.x,a.y,a.s*a.l,0,2*Math.PI),x.fill()})}}function u(){pos.x+=vel.x,pos.y+=vel.y;let a=t.getBoundingClientRect(),b=a.width,c=a.height;pos.x<=0||pos.x>=w-b?(vel.x*=-1,ch()):0,pos.y<=0||pos.y>=h-c?(vel.y*=-1,ch()):0,pos.x=Math.max(0,Math.min(w-b,pos.x)),pos.y=Math.max(0,Math.min(h-c,pos.y)),t.style.left=pos.x+'px',t.style.top=pos.y+'px'}function ch(){t.className=cls[col];console.log('Color changed to:',cls[col],colors[cls[col]]);col=(col+1)%cls.length}function i(){p=[];let a=Math.min(300,Math.floor(w*h/5000));for(let b=0;b<a;b++)p.push(new Pt(Math.random()*w,Math.random()*h))}function r(){w=window.innerWidth,h=window.innerHeight,c.width=w,c.height=h,i()}function d(){x.fillStyle='rgba(0,0,0,.1)',x.fillRect(0,0,w,h),p.forEach(a=>a.draw()),x.lineWidth=2;let b=t.className||'c0';console.log('Current class:',b,'Color:',colors[b]);x.strokeStyle=colors[b]||'#0ff';for(let c=0;c<p.length;c++)for(let d=p[c],e=c+1;e<p.length;e++){let f=p[e],g=d.x-f.x,h=d.y-f.y,i=Math.sqrt(g*g+h*h);i<120&&(x.globalAlpha=(1-i/120)*d.l*f.l,x.beginPath(),x.moveTo(d.x,d.y),x.lineTo(f.x,f.y),x.stroke())}x.globalAlpha=1,e.forEach(a=>a.draw())}function anim(){p=p.filter(a=>a.update());for(;p.length<200;)p.push(new Pt(Math.random()*w,Math.random()*h));e=e.filter(a=>a.update()),u(),d(),requestAnimationFrame(anim)}r(),ch(),anim();